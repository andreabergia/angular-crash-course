<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>titolo</title>

    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/pygments.css">
</head>
<body>

<div class="container">
    <div class="page-header">
        <h1>titolo</h1>
    </div>

    <h1 id="lesson-1-getting-started">Lesson 1: Getting started</h1>
<h2 id="what-is-angularjs">What is AngularJS?</h2>
<p><a href="http://angularjs.org">AngularJS</a> is an amazingly productive javascript web framework. It's extremely productive, designed for testability and embeddable in other applications. In a sense, AngularJS extends HTML. We'll soon see how.<br />
<a href="http://angularjs.org">http://angularjs.org</a></p>
<h2 id="bindings">Bindings</h2>
<div class="codehilite"><pre><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>
Hello, {{name}}
</pre></div>


<ul>
<li>ng-model is an attribute defined by AngularJS.</li>
<li>It roughly means: bind this textbox's value to the variable called "name".</li>
<li><code>{{expression}}</code> tells AngularJS to evaluate expression and display its value. In this case, the value of the variable "name" is displayed.</li>
<li>As you type, the value of the variable is kept in sync with the content of the text field. As soon as the variable is updated, the block {{name}} is updated.</li>
<li>In MVC terminology, ng-model and the expressions allow you to use HTML element as a view.</li>
<li>Furthermore, this binding is two-way, as you can see in the next example.</li>
</ul>
<div class="codehilite"><pre><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
Hello, {{name}}!
</pre></div>


<ul>
<li>We now have two inputs bound to the same variable: as you update one, the other gets updated as well.</li>
<li>This happens, as we mentioned before, because the binding is two-way: as you update the variable, the DOM elements bound to it get updated and viceversa.</li>
</ul>
<h2 id="controllers-and-scope">Controllers and scope</h2>
<div class="codehilite"><pre><span class="nt">&lt;script&gt;</span>
    <span class="kd">function</span> <span class="nx">Test1Ctrl</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;Andrea&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;live-example-content&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">&quot;Test1Ctrl&quot;</span><span class="nt">&gt;</span>
        Hello, {{name}}!
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>


<ul>
<li>A controller is a javascript function, whose name by convention ends with Ctrl or Controller.</li>
<li>The <code>$scope</code> is a special Angular object, that is used as glue between the controller (the javascript) and the view (the html).</li>
<li>Variables set on the <code>$scope</code> are available to the view.</li>
<li>We can use <code>ng-controller</code> on a node to specify the controller to use for the children of the given node.</li>
</ul>
<div class="codehilite"><pre><span class="nt">&lt;script&gt;</span>
<span class="kd">function</span> <span class="nx">Test2Ctrl</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;Andrea&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">Test3Ctrl</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">28</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">&quot;Test2Ctrl&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">&quot;Test3Ctrl&quot;</span><span class="nt">&gt;</span>
        Hello, {{name}} - you are {{age}} old!
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>


<ul>
<li>Controllers can be nested. Elements in the children controller can access properties set on the parent controller.</li>
</ul>
<h2 id="directives">Directives</h2>
<div class="codehilite"><pre><span class="nt">&lt;script&gt;</span>
<span class="kd">function</span> <span class="nx">Test4Ctrl</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">cities</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Rome&#39;</span><span class="p">,</span> <span class="s1">&#39;Paris&#39;</span><span class="p">,</span> <span class="s1">&#39;Berlin&#39;</span><span class="p">];</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">&quot;Test4Ctrl&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">ng-repeat=</span><span class="s">&quot;city in cities&quot;</span><span class="nt">&gt;</span>
        {{city}} is a nice place!
    <span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>


<ul>
<li>As you can see by the example above, <code>ng-repeat</code> will iterate in an array and replicate the node it is attached to, for each element of the array. <code>ng-repeat</code> can be applied to any html tag.</li>
<li><code>ng-repeat</code> can be applied to any html tag.</li>
<li>Directives are the method used by Angular to extend html.</li>
<li><code>ng-model</code>, <code>ng-repeat</code> are examples of builtin directives<br />
It is possible, and extremely useful, to define your own directives; however that will be covered later on, as it requires a good knowledge of Angular.</li>
</ul>
<div class="codehilite"><pre><span class="nt">&lt;script&gt;</span>
<span class="kd">function</span> <span class="nx">Test5Ctrl</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">28</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">&quot;Test5Ctrl&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">ng-show=</span><span class="s">&quot;age &gt;= 18&quot;</span><span class="nt">&gt;</span>
        You can vote.
    <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">ng-show=</span><span class="s">&quot;age &lt; 18&quot;</span><span class="nt">&gt;</span>
        Sorry kid, come back in a while.
    <span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>


<ul>
<li>Another extremely useful directive is <code>ng-show</code>: the node to which it is applyed will be invisible if the expression is not true.</li>
<li>You can also use <code>ng-hide</code> to make your code clearer.</li>
<li>We'll see some more useful directives later on.</li>
</ul>
<h2 id="filters">Filters</h2>
<div class="codehilite"><pre><span class="nt">&lt;script&gt;</span>
<span class="kd">function</span> <span class="nx">Test6Ctrl</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">now</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">01</span><span class="p">,</span> <span class="mi">22</span><span class="p">);</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">price</span> <span class="o">=</span> <span class="mf">42.67</span><span class="p">;</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;Picard&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">&quot;Test6Ctrl&quot;</span><span class="nt">&gt;</span>
    Today is {{now | date}}. The captain is {{name | lowercase}}, 
    yelled as {{name | uppercase}}. The price is {{price | number:1}}.
<span class="nt">&lt;/div&gt;</span>
</pre></div>


<ul>
<li>Filters are applied in the general form <code>{{expression | filter}}</code>.</li>
<li>Filters are simply javascript functions that transform the given input.</li>
<li>Angular defines a few useful filters, like <code>date</code>, <code>lowercase</code>, <code>uppercase</code>, and <code>number</code>.</li>
<li>Filters can take parameters: in the example we have passed 1 as parameter to <code>number</code>, using the syntax <code>number:1</code>. This tells the number filter to display the result using one decimal.</li>
</ul>
<div class="codehilite"><pre><span class="nt">&lt;script&gt;</span>
<span class="kd">function</span> <span class="nx">Test7Ctrl</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;France&#39;</span><span class="p">,</span> <span class="s1">&#39;Italy&#39;</span><span class="p">,</span> <span class="s1">&#39;Germany&#39;</span><span class="p">];</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">&quot;Test7Ctrl&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">ng-repeat=</span><span class="s">&quot;item in items | filter:&#39;e&#39;&quot;</span><span class="nt">&gt;</span>{​{item}}. <span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>


<ul>
<li>We have now applied the special filter <code>filter</code>. It is a filter that, when applied to an array, returns only the items that match the given parameter (in this case, 'e'). Therefore, "Italy" was excluded.</li>
<li>And now for a cool example...</li>
</ul>
<div class="codehilite"><pre><span class="nt">&lt;script&gt;</span>
<span class="kd">function</span> <span class="nx">Test8Ctrl</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;France&#39;</span><span class="p">,</span> <span class="s1">&#39;Italy&#39;</span><span class="p">,</span> <span class="s1">&#39;Germany&#39;</span><span class="p">,</span> <span class="s1">&#39;Austria&#39;</span><span class="p">,</span> <span class="s1">&#39;Japan&#39;</span><span class="p">];</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">&quot;Test8Ctrl&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;query&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;br&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">ng-repeat=</span><span class="s">&quot;item in items | filter:query&quot;</span><span class="nt">&gt;</span>{​{item}}<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>


<ul>
<li>By combining <code>ng-model</code> on an input box and </code>filter</code>, we can build a list with a quick-search.</li>
</ul>
<h2 id="responding-to-clicks">Responding to clicks</h2>
<div class="codehilite"><pre><span class="nt">&lt;script&gt;</span>
<span class="kd">function</span> <span class="nx">Test9Ctrl</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;One&#39;</span><span class="p">,</span> <span class="s1">&#39;Two&#39;</span><span class="p">,</span> <span class="s1">&#39;Three&#39;</span><span class="p">];</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">newItem</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">&quot;Test9Ctrl&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;newItem&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">ng-click=</span><span class="s">&quot;add()&quot;</span><span class="nt">&gt;</span>Add<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;br&gt;</span>
<span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">ng-repeat=</span><span class="s">&quot;item in items&quot;</span><span class="nt">&gt;</span>{​{item}}<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>


<ul>
<li>We have now defined, in the <code>$scope</code>, a function called <code>add</code>.</li>
<li>The function can access <code>newItem</code> from the <code>$scope</code>. Its value is automatically updated by Angular, as we discussed when we talked about two-way binding.</li>
<li>We have also used the <code>ng-click</code> directive to have the function invoked when the button is clicked.</li>
<li>Note: whatever function we want to attach to an <code>ng-click</code>, must be exposed to the <code>$scope</code>.</li>
</ul>
<h2 id="talking-to-servers">Talking to servers</h2>
<div class="codehilite"><pre><span class="nt">&lt;script&gt;</span>
<span class="kd">function</span> <span class="nx">Test10Ctrl</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$http</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">getWeather</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;http://api.openweathermap.org/data/2.5/weather&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">params</span><span class="o">:</span> <span class="p">{</span>
<span class="nx">units</span><span class="o">:</span> <span class="s1">&#39;metric&#39;</span><span class="p">,</span>
<span class="nx">q</span><span class="o">:</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">city</span>
<span class="p">}</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">weather</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">&quot;Test10Ctrl&quot;</span><span class="nt">&gt;</span>
City: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;city&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;button</span> <span class="na">ng-click=</span><span class="s">&quot;getWeather()&quot;</span><span class="nt">&gt;</span>Search<span class="nt">&lt;/button&gt;&lt;br&gt;</span>
<span class="nt">&lt;p</span> <span class="na">ng-show=</span><span class="s">&quot;weather&quot;</span><span class="nt">&gt;</span>Temperature: {​{weather.main.temp}}°C,
    humidity: {​{weather.main.humidity}}%.<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">ng-hide=</span><span class="s">&quot;weather&quot;</span><span class="nt">&gt;</span>Please enter a city name and press &quot;Search&quot;.<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
</pre></div>


<ul>
<li>We are now ready to start talking to servers. In this case, we'll use the excellent and free Open Weather Map service.</li>
<li>This server accepts a query to an url of the form <a href="http://api.openweathermap.org/data/2.5/weather?units=metric&amp;q=Turin">http://api.openweathermap.org/data/2.5/weather?units=metric&amp;q=Turin</a>, and will return a json object representing the current weather for Turin. (Open the URL now to see it.)</li>
<li>In our controller we defined a function <code>getWeather</code> to invoke this service. We use the Angular builtin service <code>$http</code> to perform an HTTP request and manipulate the json result.</li>
<li>We'll discuss later what services are and how they work.</li>
<li>Note how we use the second argument of <code>$http.get</code> to pass the parameters to the HTTP request.</li>
<li>Since we perform an asynchronous ajax request, we cannot simply do <code>$scope.weather = $http.get(...)</code>. <code>$http.get</code> returns a promise object. We'll discuss promises in more detail later; for the moment let us focus on the then method.</li>
<li>The then method of a promise accepts a callback (a javascript function) that will be invoked with an object wrapping the raw <code>XmlHttpRequest</code> (the browser object to perform Ajax requests).</li>
<li>By accessing <code>response.data</code>, we can access the json object returned by Open Weather Map. In turn, we save this object in the scope.</li>
<li>Therefore, what happens is: the user clicks on the button. Angular invokes the function <code>getWeather</code>, that performs the HTTP request to Open Weather Map.</li>
<li>When the HTTP requests returns, the anonymous function passed to then is executed, and there we'll save the result in the <code>$scope</code>.</li>
<li>At this point, Angular will hide the second paragraph, fill in the expressions and display the first paragraph with the values returned by the server.</li>
</ul>
<h2 id="thats-it-for-now">That's it for now</h2>
<p>You're done with this lesson. In the next part, we'll cover applications, modules and services, which will help us structure our code and build more modular applications.</p>
</div>
</body>
</html>